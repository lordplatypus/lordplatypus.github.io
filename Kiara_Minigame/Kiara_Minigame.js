(()=>{"use strict";var t,e=function(){function t(){this.gameobjects_=[]}return t.prototype.Update=function(t){for(var e=0;e<this.gameobjects_.length;e++)this.gameobjects_[e].Update(t)},t.prototype.Draw=function(t){for(var e=0;e<this.gameobjects_.length;e++)this.gameobjects_[e].Draw(t)},t.prototype.DelayedDraw=function(t){for(var e=0;e<this.gameobjects_.length;e++)this.gameobjects_[e].DelayedDraw(t)},t.prototype.Add=function(t){this.gameobjects_.push(t)},t.prototype.RemoveDead=function(){for(var t=0;t<this.gameobjects_.length;)this.gameobjects_[t].DEAD?(this.gameobjects_[t].Deconstructor(),delete this.gameobjects_[t],this.gameobjects_.splice(t,1)):t++},t.prototype.Search=function(t,e,i){for(var n=0;n<this.gameobjects_.length;n++)if(this.gameobjects_[n].NAME===t&&this.gameobjects_[n].TAG===e&&this.gameobjects_[n].ID===i)return this.gameobjects_[n];return null},t.prototype.SearchByName=function(t){for(var e=0;e<this.gameobjects_.length;e++)if(this.gameobjects_[e].NAME===t)return this.gameobjects_[e];return null},t.prototype.SearchByTag=function(t){for(var e=0;e<this.gameobjects_.length;e++)if(this.gameobjects_[e].TAG===t)return this.gameobjects_[e];return null},t.prototype.SearchByID=function(t){for(var e=0;e<this.gameobjects_.length;e++)if(this.gameobjects_[e].ID===t)return this.gameobjects_[e];return null},t.prototype.CheckCollision=function(){for(var t=0;t<this.gameobjects_.length;t++)if(this.gameobjects_[t].ALLOWCOLLISIONS&&!this.gameobjects_[t].DEAD)for(var e=0;e<this.gameobjects_.length;e++)this.gameobjects_[e].ALLOWCOLLISIONS&&(this.gameobjects_[e].DEAD||this.gameobjects_[t]!==this.gameobjects_[e]&&this.gameobjects_[t].Hitbox().Intersect(this.gameobjects_[e].Hitbox())&&(this.gameobjects_[t].OnCollision(this.gameobjects_[e]),this.gameobjects_[e].OnCollision(this.gameobjects_[t])))},t.prototype.Clear=function(){for(var t=0;t<this.gameobjects_.length;t++)this.gameobjects_[t].Deconstructor();this.gameobjects_=[]},t}(),i=function(){function t(t){this.game_=t,this.gom_=new e}return t.prototype.Init=function(){},t.prototype.Update=function(t){this.gom_.RemoveDead(),this.gom_.Update(t)},t.prototype.Draw=function(t){this.gom_.Draw(t),this.gom_.DelayedDraw(t)},t.prototype.ChangeScene=function(t){this.game_.ChangeScene(t)},t.prototype.Add=function(t){this.gom_.Add(t)},t.prototype.Search=function(t,e,i){return this.gom_.Search(t,e,i)},t.prototype.SearchByName=function(t){return this.gom_.SearchByName(t)},t.prototype.SearchByTag=function(t){return this.gom_.SearchByTag(t)},t.prototype.SearchByID=function(t){return this.gom_.SearchByID(t)},t.prototype.End=function(){this.gom_.Clear()},t}(),n=function(){function t(t,e){this.x_=t,this.y_=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this.x_},set:function(t){this.x_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.y_},set:function(t){this.y_=t},enumerable:!1,configurable:!0}),t}(),o=function(){function t(t,e,i,n){this.x_=t,this.y_=e,this.width_=i,this.height_=n}return t.prototype.Intersect=function(t){for(var e=[this.x_,this.y_,this.x_+this.width_,this.y_,this.x_,this.y_+this.height_,this.x_+this.width_,this.y_+this.height_],i=0;i<e.length;i+=2)if(e[i]>=t.X&&e[i]<=t.X+t.WIDTH&&e[i+1]>=t.Y&&e[i+1]<=t.Y+t.HEIGHT)return!0;return!1},Object.defineProperty(t.prototype,"X",{get:function(){return this.x_},set:function(t){this.x_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Y",{get:function(){return this.y_},set:function(t){this.y_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"WIDTH",{get:function(){return this.width_},set:function(t){this.width_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HEIGHT",{get:function(){return this.height_},set:function(t){this.height_=t},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){this.name_="",this.tag_="",this.ID_=0,this.position_=new n(0,0),this.width_=0,this.height_=0,this.left_=0,this.right_=0,this.top_=0,this.bottom_=0,this.allowCollisions_=!1,this.isDead_=!1}return t.prototype.Update=function(t){},t.prototype.Draw=function(t){},t.prototype.DelayedDraw=function(t){},t.prototype.Hitbox=function(){return new o(this.position_.x+this.left_,this.position_.y+this.top_,this.width_-this.right_,this.height_-this.bottom_)},t.prototype.OnCollision=function(t){},t.prototype.Kill=function(){this.isDead_=!0},t.prototype.Deconstructor=function(){},Object.defineProperty(t.prototype,"NAME",{get:function(){return this.name_},set:function(t){this.name_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TAG",{get:function(){return this.tag_},set:function(t){this.tag_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ID",{get:function(){return this.ID_},set:function(t){this.ID_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DEAD",{get:function(){return this.isDead_},set:function(t){this.isDead_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"POSITION",{get:function(){return this.position_},set:function(t){this.position_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"LEFT",{get:function(){return this.left_},set:function(t){this.left_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RIGHT",{get:function(){return this.right_},set:function(t){this.right_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TOP",{get:function(){return this.top_},set:function(t){this.top_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BOTTOM",{get:function(){return this.bottom_},set:function(t){this.bottom_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ALLOWCOLLISIONS",{get:function(){return this.allowCollisions_},set:function(t){this.allowCollisions_=t},enumerable:!1,configurable:!0}),t}(),r=function(){function t(t,e,i){this.canvas_=document.createElement("canvas"),this.canvas_.width=t,this.canvas_.height=e,this.canvas_.id=void 0===i?"":i,this.ctx_=this.canvas_.getContext("2d")}return Object.defineProperty(t.prototype,"CANVAS",{get:function(){return this.canvas_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CONTEXT",{get:function(){return this.ctx_},enumerable:!1,configurable:!0}),t}(),s=(t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)},function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),h=function(t){function e(e,i,o,a){var s=t.call(this)||this;return s.OnImgLoad=function(){null!==s.canvas_.CONTEXT&&s.canvas_.CONTEXT.drawImage(s.img_,0,0,s.img_.naturalWidth,s.img_.naturalHeight,0,0,s.canvas_.CANVAS.width,s.canvas_.CANVAS.height)},s.name_=e,s.tag_=i,s.ID_=o,s.position_=new n(a.x,a.y),s.width_=480,s.height_=270,s.canvas_=new r(s.width_,s.height_),s.img_=new Image,s.img_.src="Kiara_Background.png",s.img_.onload=s.OnImgLoad,s}return s(e,t),e.prototype.Update=function(t){},e.prototype.Draw=function(t){t.drawImage(this.canvas_.CANVAS,this.position_.x,this.position_.y)},e}(a),_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lifespan_=0,e.age_=0,e.progressSpeed_=0,e.progressRate_=0,e.scale_=new n(0,0),e.startScale_=new n(0,0),e.endScale_=new n(0,0),e.velocity_=new n(0,0),e.force_=new n(0,0),e.damp_=0,e.angle_=0,e.rad_=0,e.translate_=new n(0,0),e.angularVelocity_=0,e.angularDamp_=0,e.color_=!1,e.red_=0,e.green_=0,e.blue_=0,e.alpha_=0,e.startAlpha_=0,e.endAlpha_=0,e}return _(e,t),e.prototype.Update=function(t){this.UpdateAge(t),this.UpdateProgressRate(),this.UpdateScale(),this.UpdateVelocity(t),this.UpdatePosition(t),this.UpdateAngle(t),this.UpdateAlpha()},e.prototype.UpdateAge=function(t){this.age_+=t,this.age_>=this.lifespan_&&this.Kill()},e.prototype.UpdateProgressRate=function(){this.progressRate_=this.age_/this.lifespan_*this.progressSpeed_},e.prototype.UpdateScale=function(){this.scale_=this.LerpVector(this.startScale_,this.endScale_,this.progressRate_)},e.prototype.UpdateVelocity=function(t){var e=this.velocity_.x+this.force_.x*t,i=this.velocity_.y+this.force_.y*t;e*=Math.pow(this.damp_,60*t),i*=Math.pow(this.damp_,60*t),this.velocity_=new n(e,i)},e.prototype.UpdatePosition=function(t){var e=this.position_.x+this.velocity_.x*t,i=this.position_.y+this.velocity_.y*t;this.position_=new n(e,i)},e.prototype.UpdateAngle=function(t){this.angle_+=this.angularVelocity_*t,this.rad_=this.angle_*Math.PI/180,this.translate_=new n(this.position_.x+this.width_*this.scale_.x/2,this.position_.y+this.height_*this.scale_.y/2)},e.prototype.UpdateAlpha=function(){this.alpha_=this.LerpNumber(this.startAlpha_,this.endAlpha_,this.progressRate_)},e.prototype.LerpNumber=function(t,e,i){return t+(e-t)*i},e.prototype.LerpVector=function(t,e,i){var o=(1-i)*t.x+i*e.x,a=(1-i)*t.y+i*e.y;return new n(o,a)},e.prototype.Deconstructor=function(){},e}(a),p=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u=function(t){function e(e,i,o,a,s,h,_,c,p,u,l,f,g,d,m,y,w,v,b){var O=t.call(this)||this;return O.img_=new Image,O.img_.src=e,O.position_=i,O.lifespan_=void 0===o?1:o,O.age_=0,O.progressSpeed_=void 0===a?1:a,O.width_=void 0===s?O.img_.naturalWidth:s.x,O.height_=void 0===s?O.img_.naturalHeight:null==s?void 0:s.y,O.scale_=void 0===h?new n(1,1):h,O.startScale_=void 0===h?new n(1,1):h,O.endScale_=void 0===_?new n(1,1):_,O.velocity_=void 0===c?new n(0,0):c,O.force_=void 0===p?new n(0,0):p,O.damp_=void 0===u?1:u,O.angle_=void 0===l?0:l,O.angularVelocity_=void 0===f?0:f,O.angularDamp_=void 0===g?1:g,O.color_=void 0!==y&&y,O.red_=void 0===w?255:w,O.green_=void 0===v?255:v,O.blue_=void 0===b?255:b,O.alpha_=void 0===d?1:d,O.startAlpha_=void 0===d?1:d,O.endAlpha_=void 0===m?1:m,O.tempCanvas_=new r(O.width_*O.scale_.x,O.height_*O.scale_.y),O}return p(e,t),e.prototype.Update=function(t){this.UpdateAge(t),this.UpdateProgressRate(),this.UpdateScale(),this.UpdateVelocity(t),this.UpdatePosition(t),this.UpdateAngle(t),this.UpdateAlpha(),this.UpdateCanvas()},e.prototype.UpdateCanvas=function(){null!==this.tempCanvas_.CONTEXT&&(this.color_?(this.tempCanvas_.CONTEXT.fillStyle="rgba("+this.red_+", "+this.green_+", "+this.blue_+", "+this.alpha_+")",this.tempCanvas_.CONTEXT.fillRect(0,0,this.width_,this.height_),this.tempCanvas_.CONTEXT.globalCompositeOperation="destination-in"):(this.tempCanvas_.CONTEXT.clearRect(0,0,this.tempCanvas_.CANVAS.width,this.tempCanvas_.CANVAS.height),this.tempCanvas_.CONTEXT.globalAlpha=this.alpha_),this.tempCanvas_.CONTEXT.drawImage(this.img_,0,0,this.img_.naturalWidth,this.img_.naturalHeight,0,0,this.width_,this.height_))},e.prototype.DelayedDraw=function(t){t.save(),t.translate(this.translate_.x,this.translate_.y),t.rotate(this.rad_),t.translate(-this.translate_.x,-this.translate_.y),t.drawImage(this.tempCanvas_.CANVAS,0,0,this.tempCanvas_.CANVAS.width,this.tempCanvas_.CANVAS.height,this.position_.x,this.position_.y,this.width_*this.scale_.x,this.height_*this.scale_.x),t.restore()},e}(c),l=function(){function t(t){this.scene_=t}return t.prototype.Sweat=function(t){for(var e=Math.floor(3*Math.random())+1,i=0;i<e;i++){var o=-Math.floor(50*Math.random())-10,a=Math.floor(20*Math.random())+50,r=(Math.floor(4*Math.random())+7)/10,s=Math.floor(30*Math.random())+30,h=-Math.floor(100*Math.random());this.scene_.Add(new u("./Kiara_Sweat.png",t,r,1,new n(8,11),new n(1,1),new n(0,0),new n(o,a),new n(0,0),1,s,h,1,1,0,!1))}},t.prototype.Money=function(t){for(var e=Math.floor(3*Math.random())+1,i=0;i<e;i++){var o=new n(t.x+(Math.floor(30*Math.random())-15),t.y+(Math.floor(10*Math.random())-5)),a=Math.floor(100*Math.random())-50,r=-Math.floor(50*Math.random())-50,s=(Math.floor(10*Math.random())+20)/10,h=Math.floor(720*Math.random())+360,_=Math.floor(500*Math.random())-250;this.scene_.Add(new u("./Kiara_Cash.png",o,s,1,new n(20,10),new n(1,1),new n(1,1),new n(a,r),new n(0,100),1,h,_,1,1,0,!1))}var c=Math.floor(3*Math.random())+1;for(i=0;i<c;i++)o=new n(t.x+(Math.floor(30*Math.random())-15),t.y+(Math.floor(10*Math.random())-5)),a=Math.floor(100*Math.random())-50,r=-Math.floor(50*Math.random())-50,s=(Math.floor(10*Math.random())+20)/10,h=Math.floor(720*Math.random())+360,_=Math.floor(500*Math.random())-250,this.scene_.Add(new u("./Kiara_Silver_Coin.png",o,s,1,new n(3,3),new n(1,1),new n(1,1),new n(a,r),new n(0,100),1,h,_,1,1,0,!1));var p=Math.floor(3*Math.random())+1;for(i=0;i<p;i++)o=new n(t.x+(Math.floor(30*Math.random())-15),t.y+(Math.floor(10*Math.random())-5)),a=Math.floor(100*Math.random())-50,r=-Math.floor(50*Math.random())-50,s=(Math.floor(10*Math.random())+20)/10,h=Math.floor(720*Math.random())+360,_=Math.floor(500*Math.random())-250,this.scene_.Add(new u("./Kiara_Bronze_Coin.png",o,s,1,new n(3,3),new n(1,1),new n(1,1),new n(a,r),new n(0,100),1,h,_,1,1,0,!1))},t}(),f=function(){function t(t,e){var i=this;this.OnLoad=function(){i.GetDigits(),i.SetTempCanvas()},this.number_=t,this.color_=void 0===e?"#ffffff":e,this.digits_=[],this.width_=20,this.height_=25,this.img_=new Image,this.img_.src="./Numbers.png",this.img_.onload=this.OnLoad,this.canvas_=new r(1,1)}return t.prototype.GetDigits=function(){var t=0,e=this.number_;do{t++,e/=10}while(e>=1);for(var i=0,n=0;n<t;n++){var o=this.number_-i,a=Math.pow(10,t-1-n),r=0===a?Math.floor(o):Math.floor(o/a);this.digits_.push(r),i+=r*a}},t.prototype.SetTempCanvas=function(){var t,e;if(this.canvas_.CANVAS.width=this.width_*this.digits_.length,this.canvas_.CANVAS.height=this.height_,(t=document.createElement("canvas")).width=this.width_*this.digits_.length,t.height=this.height_,null!==(e=null!==t?t.getContext("2d"):null)){for(var i=0;i<this.digits_.length;i++)e.drawImage(this.img_,this.digits_[i]*this.width_,0,this.width_,this.height_,i*this.width_,0,this.width_,this.height_);null!==this.canvas_.CONTEXT&&(this.canvas_.CONTEXT.fillStyle=this.color_,this.canvas_.CONTEXT.fillRect(0,0,this.width_*this.digits_.length,this.height_),this.canvas_.CONTEXT.globalCompositeOperation="destination-in",this.canvas_.CONTEXT.drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height))}},t.prototype.SetNumber=function(t,e){this.number_=t,this.color_=void 0===e?this.color_:e,this.digits_=[],this.GetDigits(),this.SetTempCanvas()},Object.defineProperty(t.prototype,"NUMBER",{get:function(){return this.number_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CANVAS",{get:function(){return this.canvas_},enumerable:!1,configurable:!0}),t}(),g=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(e,i,o,a,r,s){var h=t.call(this)||this;return h.name_=e,h.tag_=i,h.ID_=o,h.position_=new n(a.x,a.y),h.scene_=r,h.number_=new f(s,"#ffffff"),h.vy_=400,h.timer_=0,h.alpha_=1,h}return g(e,t),e.prototype.Update=function(t){if(this.position_.y<235){var e=Math.round(this.position_.y+this.vy_*t);this.position_.y=e}else this.position_.y=235,this.timer_+=t,this.timer_>=.05&&(this.alpha_-=5*t,this.alpha_<=0?(this.Kill(),this.scene_.Search("Score","Number",0).AddNumber(this.number_.NUMBER)):(this.number_.SetNumber(100,"rgba(255, 255, 255, "+this.alpha_+")"),this.timer_=0))},e.prototype.Draw=function(t){t.drawImage(this.number_.CANVAS.CANVAS,this.position_.x,this.position_.y)},e}(a),m=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(t){function e(e,i,o,a,s){var h=t.call(this)||this;return h.OnImgLoad=function(){h.imgLoadCount_<2?h.imgLoadCount_++:h.CanvasHandle(0,0)},h.KeyDown=function(t){h.input_=t.key},h.KeyUp=function(t){h.input_===t.key&&(h.input_="")},h.TouchStart=function(t){var e=t.changedTouches[0],i=window.innerWidth/2;e.pageX<i?h.input_="a":h.input_="d"},h.TouchEnd=function(t){h.input_=""},h.name_=e,h.tag_=i,h.ID_=o,h.position_=new n(a.x,a.y),h.width_=56,h.height_=100,h.ALLOWCOLLISIONS=!0,h.scene_=s,h.canvas_=new r(h.width_,h.height_),h.imgLoadCount_=0,h.kiaraImg_=new Image,h.kiaraImg_.src="Kiara_Minigame.png",h.kiaraImg_.onload=h.OnImgLoad,h.bucketImg_=new Image,h.bucketImg_.src="Kiara_Bucket.png",h.bucketImg_.onload=h.OnImgLoad,h.shadowImg_=new Image,h.shadowImg_.src="Kiara_Shadow.png",h.shadowImg_.onload=h.OnImgLoad,h.velocity_=300,h.input_="",h.animationtimer_=0,h.kiaraFrame_=0,h.bucketFrame_=0,h.stun_=!1,h.stunTimer_=0,h.blink_=!1,h.blinkTimer_=0,h.pm_=new l(s),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(window.addEventListener("touchstart",h.TouchStart,!1),window.addEventListener("touchend",h.TouchEnd,!1)):(window.addEventListener("keydown",h.KeyDown),window.addEventListener("keyup",h.KeyUp)),h}return m(e,t),e.prototype.Update=function(t){this.stun_?this.StunHandle(t):(this.InputHandle(t),this.AnimationHandle(t))},e.prototype.OnCollision=function(t){"Chicken"===t.NAME?(this.stun_||this.scene_.Add(new d("Points","Number",0,new n(410,10),this.scene_,100)),this.bucketFrame_<4&&(this.bucketFrame_++,this.CanvasHandle(this.kiaraFrame_,this.bucketFrame_))):"Rock"===t.NAME&&(this.stun_=!0)},e.prototype.Draw=function(t){this.blink_||t.drawImage(this.canvas_.CANVAS,this.position_.x,this.position_.y)},e.prototype.Deconstructor=function(){window.removeEventListener("keydown",this.KeyDown),window.removeEventListener("keyup",this.KeyUp)},e.prototype.CanvasHandle=function(t,e){null!==this.canvas_.CONTEXT&&(this.canvas_.CONTEXT.clearRect(0,0,this.canvas_.CANVAS.width,this.canvas_.CANVAS.height),this.canvas_.CONTEXT.drawImage(this.bucketImg_,this.bucketImg_.naturalWidth/5*e,0,this.bucketImg_.naturalWidth/5,this.bucketImg_.naturalHeight,34,44,this.bucketImg_.naturalWidth/5,this.bucketImg_.naturalHeight),this.canvas_.CONTEXT.drawImage(this.shadowImg_,0,0,this.shadowImg_.naturalWidth,this.shadowImg_.naturalHeight,0,96,this.shadowImg_.naturalWidth,this.shadowImg_.naturalHeight),this.canvas_.CONTEXT.drawImage(this.kiaraImg_,this.kiaraImg_.naturalWidth/2*t,0,this.kiaraImg_.naturalWidth/2,this.kiaraImg_.naturalHeight,0,0,this.kiaraImg_.naturalWidth/2,this.kiaraImg_.naturalHeight))},e.prototype.InputHandle=function(t){if("a"===this.input_)(e=Math.round(this.position_.x-this.velocity_*t))>0&&(this.position_.x=e);else if("d"===this.input_){var e;(e=Math.round(this.position_.x+this.velocity_*t))<480-this.width_&&(this.position_.x=e)}},e.prototype.AnimationHandle=function(t){this.animationtimer_+=t,this.animationtimer_>=.3&&(0===this.kiaraFrame_?this.kiaraFrame_=1:this.kiaraFrame_=0,this.animationtimer_=0,this.CanvasHandle(this.kiaraFrame_,this.bucketFrame_),this.pm_.Sweat(new n(this.position_.x+10,this.position_.y+24)))},e.prototype.StunHandle=function(t){this.blinkTimer_-=t,this.blinkTimer_<=0&&(this.blink_?this.blink_=!1:this.blink_=!0,this.blinkTimer_=.05),this.stunTimer_+=t,this.stunTimer_>=.5&&(this.stunTimer_=0,this.stun_=!1,this.blink_=!1)},e}(a),w=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v=function(t){function e(e,i,o,a,s,h,_){var c=t.call(this)||this;return c.OnImgLoad=function(){null!==c.canvas_.CONTEXT&&c.canvas_.CONTEXT.drawImage(c.img_,0,0,c.img_.naturalWidth,c.img_.naturalHeight,0,0,c.canvas_.CANVAS.width,c.canvas_.CANVAS.height)},c.name_=e,c.tag_=i,c.ID_=o,c.position_=new n(a.x,a.y),c.width_=8,c.height_=5,c.ALLOWCOLLISIONS=!0,c.canvas_=new r(c.width_,c.height_),c.img_=new Image,c.img_.src="Kiara_Chicken.png",c.img_.onload=c.OnImgLoad,c.velocity_=s,c.forceY_=h,c.angleVelocity_=_,c.angle_=0,c.deathPlane_=270,c}return w(e,t),e.prototype.Update=function(t){this.forceY_+=this.forceY_*t;var e=this.position_.x+this.velocity_.x*t,i=this.position_.y+(this.velocity_.y+this.forceY_)*t;this.position_.x=e,this.position_.y=i,this.angle_+=this.angleVelocity_*t*(Math.PI/180),this.position_.y>this.deathPlane_&&this.Kill()},e.prototype.OnCollision=function(t){"Kiara"===t.NAME&&this.Kill()},e.prototype.Draw=function(t){t.save(),t.translate(this.position_.x+this.width_/2,this.position_.y+this.height_/2),t.rotate(this.angle_),t.translate(-(this.position_.x+this.width_/2),-(this.position_.y+this.height_/2)),t.drawImage(this.canvas_.CANVAS,this.position_.x,this.position_.y),t.restore()},e}(a),b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(t){function e(e,i,o,a,s,h,_){var c=t.call(this)||this;return c.OnImgLoad=function(){null!==c.canvas_.CONTEXT&&c.canvas_.CONTEXT.drawImage(c.img_,0,0,c.img_.naturalWidth,c.img_.naturalHeight,0,0,c.canvas_.CANVAS.width,c.canvas_.CANVAS.height)},c.name_=e,c.tag_=i,c.ID_=o,c.position_=new n(a.x,a.y),c.width_=8,c.height_=5,c.ALLOWCOLLISIONS=!0,c.canvas_=new r(c.width_,c.height_),c.img_=new Image,c.img_.src="Kiara_Rock.png",c.img_.onload=c.OnImgLoad,c.velocity_=s,c.forceY_=h,c.angleVelocity_=_,c.angle_=0,c.deathPlane_=270,c}return b(e,t),e.prototype.Update=function(t){this.forceY_+=this.forceY_*t;var e=this.position_.x+this.velocity_.x*t,i=this.position_.y+(this.velocity_.y+this.forceY_)*t;this.position_.x=e,this.position_.y=i,this.angle_+=this.angleVelocity_*t*(Math.PI/180),this.position_.y>this.deathPlane_&&this.Kill()},e.prototype.OnCollision=function(t){"Kiara"===t.NAME&&this.Kill()},e.prototype.Draw=function(t){t.save(),t.translate(this.position_.x+this.width_/2,this.position_.y+this.height_/2),t.rotate(this.angle_),t.translate(-(this.position_.x+this.width_/2),-(this.position_.y+this.height_/2)),t.drawImage(this.canvas_.CANVAS,this.position_.x,this.position_.y),t.restore()},e}(a),C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),A=function(t){function e(e,i,o,a,r,s){var h=t.call(this)||this;return h.name_=e,h.tag_=i,h.ID_=o,h.position_=new n(a.x,a.y),h.scene_=r,h.difficulty_=s,h.odds_=0,h.timer_=0,h}return C(e,t),e.prototype.Update=function(t){this.timer_-=t,this.timer_<=0&&(this.timer_=Math.floor(5*Math.random())/10+.5,this.SpawnObject())},e.prototype.Draw=function(t){},e.prototype.SpawnObject=function(){var t=new n(-(Math.floor(300*Math.random())+100),Math.floor(100*Math.random())+50),e=Math.floor(100*Math.random()),i=Math.floor(400*Math.random())-200;Math.floor(10*Math.random())<5+this.odds_?(this.scene_.Add(new O("Rock","Object",0,this.position_,t,e,i)),this.odds_--):(this.scene_.Add(new v("Chicken","Object",0,this.position_,t,e,i)),this.odds_=this.difficulty_)},e}(a),S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),I=function(t){function e(e,i,o,a,s){var h=t.call(this)||this;return h.OnImgLoad=function(){null!==h.canvas_.CONTEXT&&h.canvas_.CONTEXT.drawImage(h.img_,0,0,h.img_.naturalWidth,h.img_.naturalHeight,0,0,h.canvas_.CANVAS.width,h.canvas_.CANVAS.height)},h.name_=e,h.tag_=i,h.ID_=o,h.position_=new n(a.x,a.y),h.width_=61,h.height_=42,h.canvas_=new r(h.width_,h.height_),h.img_=new Image,h.img_.src="Kiara_Register.png",h.img_.onload=h.OnImgLoad,h.frame_=0,h.timer_=0,h.maxTime_=0,h.hype_=!0,h.pm_=new l(s),h}return S(e,t),e.prototype.Update=function(t){this.timer_+=t,this.timer_>=this.maxTime_&&(this.timer_=0,this.hype_?this.frame_<10?this.frame_++:(this.frame_=2,this.pm_.Money(new n(this.position_.x+this.width_/2,this.position_.y+.6*this.height_)),this.maxTime_=.2):(0===this.frame_?this.frame_=1:this.frame_=0,this.maxTime_=(Math.floor(3*Math.random())+3)/10),this.CanvasHandle())},e.prototype.Draw=function(t){t.drawImage(this.canvas_.CANVAS,this.position_.x,this.position_.y)},e.prototype.CanvasHandle=function(){null!==this.canvas_.CONTEXT&&(this.canvas_.CONTEXT.clearRect(0,0,this.canvas_.CANVAS.width,this.canvas_.CANVAS.height),this.canvas_.CONTEXT.drawImage(this.img_,this.img_.naturalWidth/11*this.frame_,0,this.img_.naturalWidth/11,this.img_.naturalHeight,0,0,this.canvas_.CANVAS.width,this.canvas_.CANVAS.height))},e}(a),T=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),M=function(t){function e(e,i,o,a){var s=t.call(this)||this;return s.OnImgLoad=function(){null!==s.canvas_.CONTEXT&&s.canvas_.CONTEXT.drawImage(s.img_,0,0,s.img_.naturalWidth,s.img_.naturalHeight,0,0,s.canvas_.CANVAS.width,s.canvas_.CANVAS.height)},s.name_=e,s.tag_=i,s.ID_=o,s.position_=new n(a.x,a.y),s.width_=32,s.height_=50,s.canvas_=new r(s.width_,s.height_),s.img_=new Image,s.img_.src="Kiara_People.png",s.img_.onload=s.OnImgLoad,s.frame_=0,s.timer_=0,s.maxTime_=0,s.hype_=!0,s}return T(e,t),e.prototype.Update=function(t){this.timer_+=t,this.timer_>=this.maxTime_&&(this.timer_=0,this.maxTime_=(Math.floor(3*Math.random())+3)/10,this.hype_?2===this.frame_?this.frame_=3:this.frame_=2:0===this.frame_?this.frame_=1:this.frame_=0,this.CanvasHandle())},e.prototype.Draw=function(t){t.drawImage(this.canvas_.CANVAS,this.position_.x,this.position_.y)},e.prototype.CanvasHandle=function(){null!==this.canvas_.CONTEXT&&(this.canvas_.CONTEXT.clearRect(0,0,this.canvas_.CANVAS.width,this.canvas_.CANVAS.height),this.canvas_.CONTEXT.drawImage(this.img_,this.img_.naturalWidth/4*this.frame_,0,this.img_.naturalWidth/4,this.img_.naturalHeight,0,0,this.canvas_.CANVAS.width,this.canvas_.CANVAS.height))},e}(a),N=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),j=function(t){function e(e,i,o,a){var r=t.call(this)||this;return r.name_=e,r.tag_=i,r.ID_=o,r.position_=new n(a.x,a.y),r.number_=new f(0,"#ffffff"),r}return N(e,t),e.prototype.Update=function(t){},e.prototype.Draw=function(t){t.drawImage(this.number_.CANVAS.CANVAS,this.position_.x,this.position_.y)},e.prototype.AddNumber=function(t){this.number_.SetNumber(this.number_.NUMBER+t)},e}(a),x=function(){function t(t){this.game_=t,this.gom_=new e}return t.prototype.Init=function(){for(var t=0;t<15;t++)this.Add(new M("People","Object",t,new n(32*t,145)));for(this.Add(new h("Background","Background",0,new n(0,0))),this.Add(new A("Spawner","Object",0,new n(480,0),this,0)),t=0;t<4;t++)this.Add(new I("Register","Object",t,new n(Math.round(480/9+480/9*2*t),155),this));this.Add(new y("Kiara","Player",0,new n(0,170),this)),this.Add(new j("Score","Number",0,new n(10,10)))},t.prototype.Update=function(t){this.gom_.RemoveDead(),this.gom_.Update(t),this.gom_.CheckCollision()},t.prototype.Draw=function(t){this.gom_.Draw(t),this.gom_.DelayedDraw(t)},t.prototype.ChangeScene=function(t){this.game_.ChangeScene(t)},t.prototype.Add=function(t){this.gom_.Add(t)},t.prototype.Search=function(t,e,i){return this.gom_.Search(t,e,i)},t.prototype.SearchByName=function(t){return this.gom_.SearchByName(t)},t.prototype.SearchByTag=function(t){return this.gom_.SearchByTag(t)},t.prototype.SearchByID=function(t){return this.gom_.SearchByID(t)},t.prototype.End=function(){this.gom_.Clear()},t}(),D=function(){function t(){this.currentScene_="Kiara",this.scenes_=new Map,this.SetScenes(),this.ChangeScene(this.currentScene_)}return t.prototype.SetScenes=function(){this.scenes_.set("Menu",new i(this)),this.scenes_.set("Kiara",new x(this))},t.prototype.ChangeScene=function(t){var e,i;null===(e=this.scenes_.get(this.currentScene_))||void 0===e||e.End(),this.currentScene_=t,null===(i=this.scenes_.get(this.currentScene_))||void 0===i||i.Init()},t.prototype.Update=function(t){var e;null===(e=this.scenes_.get(this.currentScene_))||void 0===e||e.Update(t)},t.prototype.Draw=function(t){var e;null===(e=this.scenes_.get(this.currentScene_))||void 0===e||e.Draw(t)},t}(),E=function(){function t(){}return t.prototype.GetCanvasScale=function(t){if(window.innerWidth<=window.innerHeight){var e=(i=Math.floor(window.innerWidth)-window.innerWidth%t.x)/t.x*t.y;return new n(i-t.x,e-t.y)}var i=(e=Math.floor(window.innerHeight)-window.innerHeight%t.y)/t.y*t.x;return new n(i-t.x,e-t.y)},t}(),P=Date.now(),k=("main_canvas",document.getElementById("main_canvas")),L=new n(480,270);k.width=L.x,k.height=L.y;var V=k.getContext("2d"),U=(new E).GetCanvasScale(new n(16,9));k.style.width=U.x+"px",k.style.height=U.y+"px",k.style.imageRendering="pixelated",new n(480,270);var H=new D;!function t(){var e,i;H.Update((e=Date.now(),i=e-P,P=e,i/1e3)),null!==V&&(V.fillStyle="black",V.fillRect(0,0,k.getBoundingClientRect().width,k.getBoundingClientRect().height),H.Draw(V)),window.requestAnimationFrame(t)}()})();